{"version":3,"sources":["webpack:///./src/views/forestage/ProductDetailView.vue?94f8","webpack:///./src/views/forestage/ProductDetailView.vue","webpack:///./src/views/forestage/ProductDetailView.vue?ae97"],"names":["class","src","cacheImage","alt","product","title","activeImg","imageUrl","imagesUrl","img","key","description","price","origin_price","content","name","id","productQuantity","number","value","addCart","product-data","productsData","getProductDetail","show","isLoading","error","closeError","addCartMessage","closeAddCartMessage","addCartProduct","quantity","components","AddCartProduct","ProductMore","data","computed","this","$store","getters","methods","getProducts","dispatch","$route","params","filter","item","product_id","qty","getCartData","mounted","__exports__","render"],"mappings":"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","file":"js/chunk-019f9312.5402f442.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./ProductDetailView.vue?vue&type=style&index=0&id=a7f7d8a0&lang=postcss&scoped=true\"","<template>\n  <div class=\"container px-4 mx-auto pt-[112px]\">\n    <div class=\"grid lg:grid-cols-2 gap-7\">\n      <div class=\"w-full\">\n        <img\n          :src=\"cacheImage\"\n          :alt=\"product.title\"\n          class=\"object-cover mb-2 rounded-lg h-[400px] w-full\"\n        />\n        <ul class=\"flex\">\n          <li\n            class=\"img\"\n            :class=\"activeImg(product.imageUrl)\"\n            @click=\"cacheImage = product.imageUrl\"\n          >\n            <img :src=\"product.imageUrl\" alt=\"product.title\" class=\"object-cover w-full h-full\" />\n          </li>\n          <li v-for=\"img in product.imagesUrl\" :key=\"img\" @click=\"cacheImage = img\">\n            <div class=\"img\" v-if=\"img\" :class=\"activeImg(img)\">\n              <img :src=\"img\" alt=\"product.title\" class=\"object-cover w-full h-full\" />\n            </div>\n          </li>\n        </ul>\n      </div>\n      <section class=\"flex flex-col mt-6\">\n        <div class=\"flex items-end mb-6\">\n          <h1 class=\"mr-2 text-4xl font-bold\">{{ product.title }}</h1>\n          <p class=\"text-xl\">{{ product.description }}</p>\n        </div>\n        <div class=\"flex items-center text-[#40916C] mb-8\">\n          <p class=\"mr-3 text-3xl\">NT$ {{ product.price }}</p>\n          <p class=\"line-through\">NT$ {{ product.origin_price }}</p>\n        </div>\n        <p class=\"p-3 bg-gray-100\">{{ product.content }}</p>\n\n        <div class=\"flex items-center my-6 lg:mt-auto lg:mb-[72px]\">\n          <select\n            name=\"\"\n            id=\"\"\n            v-model=\"productQuantity\"\n            class=\"px-2 py-[6.5px] mr-3 border-2 rounded-lg lg:px-5\"\n          >\n            <option v-for=\"number in 12\" :value=\"number\" :key=\"number\">{{ number }}</option>\n          </select>\n          <base-btn class=\"w-full\" @click=\"addCart(product.id)\">加入購物車</base-btn>\n        </div>\n      </section>\n    </div>\n    <div class=\"py-3 mt-3 mb-6 border-t-2\">\n      <h2 class=\"mb-1 text-xl\">注意事項</h2>\n      <ul class=\"pl-5 list-disc\">\n        <li>\n          生鮮食品不適用於消費者保護法第19條，並不享用7天鑑賞期，若您對於訂購之商品不甚滿意且希望辦理退貨時，請於到貨後4小時內拍照存證，並將問題反映客服人員\n        </li>\n        <li>出貨時間：付款後隔天將有專車送達</li>\n      </ul>\n    </div>\n    <product-more\n      title=\"更多商品\"\n      :product-data=\"productsData\"\n      @product-detail-id=\"getProductDetail\"\n      @add-cart-id=\"addCart\"\n    ></product-more>\n  </div>\n  <base-loading :show=\"isLoading\"></base-loading>\n  <base-dialog :show=\"!!error\" title=\"Error\" @close=\"closeError\">{{ error }}</base-dialog>\n  <base-dialog :show=\"!!addCartMessage\" title=\"已加入購物車\" @close=\"closeAddCartMessage\">\n    <add-cart-product :product=\"addCartProduct\" :quantity=\"productQuantity\"></add-cart-product>\n  </base-dialog>\n</template>\n\n<script>\nimport AddCartProduct from '../../components/forestage/product/AddCartProduct.vue';\nimport ProductMore from '../../components/forestage/product/ProductMore.vue';\n\nexport default {\n  components: { AddCartProduct, ProductMore },\n  data() {\n    return {\n      isLoading: false,\n      error: null,\n      product: {},\n      cacheImage: '',\n      productQuantity: 1,\n      addCartProduct: {},\n      addCartMessage: '',\n    };\n  },\n  computed: {\n    productsData() {\n      return this.$store.getters['forestageProducts/productsData'];\n    },\n  },\n  methods: {\n    async getProducts() {\n      try {\n        this.isLoading = true;\n        await this.$store.dispatch('forestageProducts/getProducts');\n        this.getProductDetail(this.$route.params.id);\n      } catch (err) {\n        this.error = err;\n      } finally {\n        this.isLoading = false;\n      }\n    },\n    getProductDetail(id) {\n      [this.product] = this.productsData.filter((item) => item.id === id);\n      this.cacheImage = this.product.imageUrl;\n    },\n    closeError() {\n      this.error = null;\n    },\n    activeImg(img) {\n      if (this.cacheImage === img) {\n        return 'activeImg';\n      }\n      return 'cursor-pointer';\n    },\n    async addCart(id) {\n      try {\n        this.isLoading = true;\n        const data = {\n          data: {\n            product_id: id,\n            qty: this.productQuantity,\n          },\n        };\n        await this.$store.dispatch('forestageCart/addCart', data);\n        this.addCartMessage = this.$store.getters['forestageCart/addCart'];\n\n        [this.addCartProduct] = this.productsData.filter((item) => item.id === id);\n        this.getCartData();\n      } catch (err) {\n        this.error = err;\n      } finally {\n        this.isLoading = false;\n      }\n    },\n    async getCartData() {\n      try {\n        this.isLoading = true;\n        await this.$store.dispatch('forestageCart/getCart');\n      } catch (err) {\n        this.error = err;\n      } finally {\n        this.isLoading = false;\n      }\n    },\n    closeAddCartMessage() {\n      this.addCartMessage = '';\n    },\n  },\n  mounted() {\n    this.getProducts();\n  },\n};\n</script>\n\n<style lang=\"postcss\" scoped>\n.img {\n  @apply border-2 mr-2 opacity-50 p-1 w-[100px] h-[66px];\n}\n.activeImg {\n  @apply opacity-100;\n}\n</style>\n","import { render } from \"./ProductDetailView.vue?vue&type=template&id=a7f7d8a0&scoped=true\"\nimport script from \"./ProductDetailView.vue?vue&type=script&lang=js\"\nexport * from \"./ProductDetailView.vue?vue&type=script&lang=js\"\n\nimport \"./ProductDetailView.vue?vue&type=style&index=0&id=a7f7d8a0&lang=postcss&scoped=true\"\n\nimport exportComponent from \"D:\\\\pc\\\\Desktop\\\\practice\\\\2022-vue-shopping\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-a7f7d8a0\"]])\n\nexport default __exports__"],"sourceRoot":""}